@if (!isHidden) {
<div
  class="flex items-center border border-gray-300 p-4 rounded-lg mb-4 bg-white shadow-md cursor-pointer"
  [class.opacity-50]="isHidden"
  [class.pointer-events-none]="isHidden"
  (click)="onClick()"
>
  <div class="flex flex-col w-full">
    <div class="flex items-center w-full">
      <div class="flex items-center size-28">
        @if (job.company_image) {
        <img
          [src]="job.company_image"
          alt="{{ job.company }}"
          class="size-10/12 mr-4"
        />
        } @else {
        <svg
          class="size-10/12 text-gray-800/60"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          fill="none"
          viewBox="0 0 24 24"
        >
          <path
            stroke="currentColor"
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="m3 16 5-7 6 6.5m6.5 2.5L16 13l-4.286 6M14 10h.01M4 19h16a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1Z"
          />
        </svg>

        }
      </div>

      <div class="flex-1">
        <h3 class="m-0 text-lg text-gray-800 capitalize font-bold">
          {{ job.title.toLowerCase() }}
        </h3>
        <p class="my-1 text-xs font-bold text-gray-600 capitalize">
          {{ job.company.toLowerCase() }}
        </p>
        <p class="my-1 text-xs font-bold text-gray-600/60 capitalize">
          {{ job.location.toLowerCase() || "No especificado" }}
        </p>
      </div>

      <app-job-menu
        [job]="job"
        [jobId]="job.job_id"
        (click)="$event.stopPropagation()"
      ></app-job-menu>
    </div>

    <div class="flex flex-row items-center justify-between">
      <div class="mt-2 text-xs text-gray-600 font-semibold">
        Publicado el {{ dateFormat(job.posted_date) }}
      </div>
      <div class="relative w-9 h-9">
        <svg width="35" height="35" viewBox="0 0 40 40">
          <circle
            cx="20"
            cy="20"
            r="18"
            fill="none"
            stroke="#E0E0E0"
            stroke-width="3"
          ></circle>
          <circle
            cx="20"
            cy="20"
            r="18"
            fill="none"
            stroke="#FBC02D"
            stroke-width="3"
            stroke-dasharray="113"
            [attr.stroke-dashoffset]="113 - (percentage / 100) * 113"
            stroke-linecap="round"
            transform="rotate(-90 20 20)"
          ></circle>
          <text
            x="50%"
            y="50%"
            text-anchor="middle"
            dy="0.3em"
            font-size="10"
            fill="#FBC02D"
          >
            {{ percentage }}%
          </text>
        </svg>
      </div>
    </div>
  </div>
</div>

}@else {
<div class="flex flex-col items-center justify-center p-6">
  <p class="text-gray-700 font-medium">Oferta oculta</p>
  <button
    class="mt-2 px-4 py-2 border rounded-lg text-blue-600 flex items-center"
    (click)="toggleHidden()"
    (click)="$event.stopPropagation()"
  >
    <svg class="w-5 h-5 mr-2" viewBox="0 0 24 24">
      <path
        stroke="currentColor"
        stroke-linecap="round"
        stroke-linejoin="round"
        stroke-width="2"
        d="M3.933 13.909A4.357 4.357 0 0 1 3 12c0-1 4-6 9-6m7.6 3.8A5.068 5.068 0 0 1 21 12c0 1-3 6-9 6-.314 0-.62-.014-.918-.04M5 19 19 5m-4 7a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"
      />
    </svg>
    Mostrar oferta
  </button>
</div>
}
